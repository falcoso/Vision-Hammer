10/10/19 - First Supervision

  First meeting with Joan. Discussed initial Risk assessment. Games workshop are
  unable to provide CAD models for training, but JL will contact Hugo in the
  dept who has been working on voxel carving to potentially scan in models. Need
  to bring in models next week to show, as well as start making some cardboard
  models of scenery to work with.

  Further work:
  python-pcl may be a useful point cloud library. Look into registration using
  ICP in the open3d library. A lot of mention of mixture of gaussians.

11/10/19 - Cameras

  Prices of the Realsense can vary upwards of £150, although a second hand
  v2 Kinect can go for as little as £40, comparisons online show less resolution
  with the kinect but much fewer noise artifacts and therefore a clearer point
  cloud image.

  Kinect v2: 0.5m-4.5m
  RealSense: 0.2-1.2m

15/10/19

Created a set of several related point clouds to try registering with open3d.
  Global method uses RASNAC and then refines to a more accurate registration
  with ICP. However, matching doesn't seem very good out the box even with what
  appears to be very similar clouds.

  Created CAD model for a building that can be laser cut to start creating a
  board top from which to produce LOS.

18/10/19 - Registration works!

  https://towardsdatascience.com/point-cloud-data-simple-approach-f3855fdc08f5
  Created some cleaner point clouds which are simply models on a table with
  blinds in the background. This makes registration a much simpler task. Also
  looked at Colored Point Cloud Registration Revisited which makes use of the
  fact that we have a colour image to overlay. Now need to look into how I can
  automatically clean up the data by removing outliers.

  Have done some reading on further registration techniques, the mention of GMM
  models basically involves clustering GMMs at different levels of hierarchy.
  The mean of each cluster tells you its location and the variance matrix give
  the shape i.e. an eigenvalue close to 0 means that the cluster is likely a
  plane.

  Created a simple script that tries to bin the most common normals in a scene.
  Doesn't actually produce perfect normals to the large planes in the point
  clouds but, may be useful as a finger print to work out initial rotations.

23/10/19 - Isolating models
  Demonstrated current matching. discussed once models have been isolated
  looking at PCA of each model to get a unique signature. Other matching
  criteria might be volume, and elevation of centre of mass from the ground.

  TODO:
  Make a set of images RGB with depth info and will look at voxel carving, try
  matching the clouds together to get an isolated mesh of each model, Hugo
  will also look into the dataset to see what he can do with them.
  Clear out planes, and try matching the point clouds with just the structure
  of the miniatures remaining.

28/10/19 - Isolating Planes
  Successfully implemented a region growing algorithm and have been able to
  isolate planes. Created ipython notebook to make displaying segments of code
  much easier.

6/11/19
  Over the last week have created data set for each model to be stitched
  together as well as additional images of the board states. After cleaning up
  the individual models, removing all the background and scatter etc. (which
  works remarkably well!) the point cloud registration is very poor, and in fact
  makes the alignment worse. I have begun looking at a potential new algorithm
  that treats colour as extra spacial dimensions for working out correspondence.
  Have also considered forcing a large known plane into the point cloud to help
  anchor the cloud.

  bi-vector

  cost function base on point normals

  cut out all but legs

  nerbs

12/11/19
  Fine tuning the registration algorithm and forcing in the table planes does
  cause some of the clouds to register correctly, however outliers in the plane
  fitting causes some of the initial alignment to be off. Currently looking at
  Hough transforms and RANSAC to more reliably fit the planes.

  Upon testing an example where the plane fit is poor I noticed that the SVD
  with smallest eigen value is different to pseudoinverse result - looking in
  to whether this is to do with small coordinate system so will play around
  with scaling

19/11/19
  Turns out there was nothing wrong with the plane fitting but SVD was used
  since all the principle vectors were required later on so no point
  re-computing.

  Created the combined meshes of the models using CloudCompare and aligning them
  by hand. Have a full model of the Broadside and Commander but its very noisey
  so trying to create a mesh from them is hard. Ball Pivoting algorithm seems
  to provide good results, but it occasionally flips to internal surfaces which
  we don't want!

  Also found that open3d does have a voxel carving method based on depth images
  so that may be worth looking into should this fail.


  you know the minimum size of models so can detect point clouds that are not models or parts of models from This

03/01/19
    While writing the report it was noticed that in the segmentation function
    the input cloud is never reduced so there may be extensive repetition of
    calculations - this might be why it runs so slow on non-downsampled clouds

05/01/19
    Segmentation still runs quite slowly so may be worth looking at other options
    Previously a link to a clustering tutorial was used. Will look at this.
